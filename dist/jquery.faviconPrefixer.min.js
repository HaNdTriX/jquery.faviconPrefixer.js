/*
 *  jQuery faviconPrefixer - v0.0.7
 *  Puts a favicon next to each link.
 *  https://github.com/handtrix/jquery.faviconPrefixer
 *
 *  Made by HaNdTriX
 *  Under MIT License
 */
!function(a){"use strict";function b(b,e){this.element=b,this.$element=a(b),this.options=a.extend({},d,e),this.$anchors=this.$element.find(this.options.targetSelector),this._defaults=d,this._name=c,this.init()}var c="faviconPrefixer",d={apiURL:"//favicon.yandex.net/favicon/",iconClassName:"fp-icon",iconSoloClassName:"fp-solo",glueMethod:"prepend",targetSelector:"a, i[data-host]",linkFilter:function(a){var b=a.host||(a.dataset?a.dataset.host:"");if(b&&""!==b)return b}};b.prototype={init:function(){this.findUrls(),this.createSpriteUrl(),this.setFavicons()},findUrls:function(){this.urls=a.map(this.$anchors,this.options.linkFilter),this.urls=a.unique(this.urls)},createSpriteUrl:function(){this.spriteUrl=this.options.apiURL+this.urls.join("/")},getFaviconSpriteOffset:function(a){var b=this.options.linkFilter(a),c=this.urls.indexOf(b);return-1===c?"16px":"-"+16*c+"px"},setFaviconNode:function(b){var c=this.getFaviconSpriteOffset(b),d=a("<i>").addClass(this.options.iconClassName).css({height:"16px",width:"16px",display:"inline-block",verticalAlign:"middle",backgroundImage:"url("+this.spriteUrl+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 "+c});"I"===b.nodeName?a(b).replaceWith(d.addClass(this.options.iconSoloClassName)):a(b)[this.options.glueMethod](d)},setFavicons:function(){var b=this;a.each(this.$anchors,function(a,c){b.setFaviconNode(c)})}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);